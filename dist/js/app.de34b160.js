(function(){var s={6700:function(s,e,t){var i={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":2385,"./th.js":2385,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function r(s){var e=n(s);return t(e)}function n(s){if(!t.o(i,s)){var e=new Error("Cannot find module '"+s+"'");throw e.code="MODULE_NOT_FOUND",e}return i[s]}r.keys=function(){return Object.keys(i)},r.resolve=n,s.exports=r,r.id=6700},3160:function(s,e,t){"use strict";var i=t(9242),r=t(3396);const n={id:"wrapper"},o={class:"main-content section"};function a(s,e,t,i,a,l){const c=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("main",o,[(0,r.Wm)(c)])])}var l={beforeCreate(){this.$store.commit("initializeStore")}},c=t(89);const u=(0,c.Z)(l,[["render",a]]);var d=u,h=t(2483),m=t(7139);const g=s=>((0,r.dD)("data-v-56c76702"),s=s(),(0,r.Cn)(),s),f={class:"container"},p={class:"columns"},v={class:"column is-8 is-offset-2"},_={class:"level is-mobile"},j=g((()=>(0,r._)("h1",{class:"title is-4 mb-0"},"VK Test",-1))),k=["href"],b=["href"],w={class:"search"},y={class:"control"},D=g((()=>(0,r._)("i",{class:"bi bi-x-circle-fill"},null,-1))),L=[D],z={key:0,class:"box search-hints"},x={class:"user"},O={class:"level is-mobile mb-1"},C={class:"level-left"},S={class:"image is-32x32 mr-3"},H=["src"],q={class:"level-right"},$=["onClick"],I=g((()=>(0,r._)("hr",{class:"dropdown-divider"},null,-1))),P={class:"tabs mt-3"},U={key:0,class:"source-items"},N={class:"box mt-2"},T={class:"level is-mobile"},Y={class:"level-left"},W={class:"image is-48x48"},F=["src"],K={class:"ml-2"},R={class:"level-right"},A=["onClick"],E={key:1,class:"friends-items"},J={class:"level is-mobile"},M={class:"level-left"},V={class:"level-item"},B={class:"image is-48x48"},Z=["src"],G={class:"level-item"},Q={class:"ml-2"},X={key:0,class:"mr-2"},ss={key:1,class:"mr-2"},es={key:2,class:"mr-2"},ts={key:3,class:"mr-2"};function is(s,e,t,n,o,a){const l=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",f,[(0,r._)("div",p,[(0,r._)("div",v,[(0,r._)("div",_,[(0,r.Wm)(l,{to:{name:"home"}},{default:(0,r.w5)((()=>[j])),_:1}),s.$store.state.isAuthenticated?((0,r.wg)(),(0,r.iD)("a",{key:1,class:"button is-success",href:a.loginURL},"Обновить токен",8,b)):((0,r.wg)(),(0,r.iD)("a",{key:0,class:"button is-success",href:a.loginURL},"Авторизоваться",8,k))]),(0,r._)("div",w,[(0,r._)("div",y,[(0,r.wy)((0,r._)("input",{class:"input",type:"text",placeholder:"Имя, фамилия, username или id","onUpdate:modelValue":e[0]||(e[0]=s=>o.search=s),onFocus:e[1]||(e[1]=s=>o.showHints=!0)},null,544),[[i.nr,o.search]]),o.search?((0,r.wg)(),(0,r.iD)("a",{key:0,class:"clear",onClick:e[2]||(e[2]=s=>o.search="")},L)):(0,r.kq)("",!0)]),o.search&&o.searchHints.length>0&&o.showHints?((0,r.wg)(),(0,r.iD)("div",z,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.searchHints,(s=>((0,r.wg)(),(0,r.iD)("div",x,[(0,r._)("div",O,[(0,r._)("div",C,[(0,r._)("figure",S,[(0,r._)("img",{src:s.photo_50},null,8,H)]),(0,r._)("p",null,(0,m.zw)(s.first_name)+" "+(0,m.zw)(s.last_name),1)]),(0,r._)("div",q,[(0,r._)("a",{class:"button is-success",onClick:e=>a.addToSource(s)},"Добавить",8,$)])]),I])))),256))])):(0,r.kq)("",!0)]),(0,r._)("div",P,[(0,r._)("ul",null,[(0,r._)("li",{class:(0,m.C_)({"is-active":"source"===o.activeList})},[(0,r._)("a",{onClick:e[3]||(e[3]=s=>o.activeList="source")},"Исходный")],2),(0,r._)("li",{class:(0,m.C_)({"is-active":"friends"===o.activeList})},[(0,r._)("a",{onClick:e[4]||(e[4]=s=>o.activeList="friends")},"Друзья")],2)])]),"source"===o.activeList?((0,r.wg)(),(0,r.iD)("div",U,[o.sourceList.length>0?((0,r.wg)(),(0,r.iD)("button",{key:0,class:(0,m.C_)(["button is-success",{"is-loading":o.isLoading}]),onClick:e[5]||(e[5]=(...s)=>a.buildFriends&&a.buildFriends(...s))},"Построить",2)):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.sourceList,(s=>((0,r.wg)(),(0,r.iD)("div",N,[(0,r._)("div",T,[(0,r._)("div",Y,[(0,r._)("figure",W,[(0,r._)("img",{src:s.photo_50},null,8,F)]),(0,r._)("p",K,(0,m.zw)(s.first_name)+" "+(0,m.zw)(s.last_name),1)]),(0,r._)("div",R,[(0,r._)("a",{class:"button is-danger",onClick:e=>a.removePerson(s.id)},"Удалить",8,A)])])])))),256))])):(0,r.kq)("",!0),"friends"===o.activeList&&o.friendsList.length>0?((0,r.wg)(),(0,r.iD)("div",E,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.friendsPart,(s=>((0,r.wg)(),(0,r.iD)("div",{class:"box",style:(0,m.j5)({backgroundColor:a.getBGColor(s.source_ids.length)})},[(0,r._)("div",J,[(0,r._)("div",M,[(0,r._)("div",V,[(0,r._)("figure",B,[(0,r._)("img",{src:s.photo_50},null,8,Z)])]),(0,r._)("div",G,[(0,r._)("div",Q,[(0,r.Wm)(l,{to:{name:"details",params:{id:s.id},query:{source_ids:s.source_ids.toString()}}},{default:(0,r.w5)((()=>[(0,r._)("p",null,(0,m.zw)(s.first_name)+" "+(0,m.zw)(s.last_name),1)])),_:2},1032,["to"]),1===s.sex?((0,r.wg)(),(0,r.iD)("span",X,"Женщина")):(0,r.kq)("",!0),2===s.sex?((0,r.wg)(),(0,r.iD)("span",ss,"Мужчина")):(0,r.kq)("",!0),s.bdate?((0,r.wg)(),(0,r.iD)("span",es,(0,m.zw)(a.getAge(s.bdate)),1)):(0,r.kq)("",!0),s.friends_count?((0,r.wg)(),(0,r.iD)("span",ts,"друзей: "+(0,m.zw)(s.friends_count),1)):(0,r.kq)("",!0)])])])])],4)))),256)),o.friendsList.length>o.friendsPart.length?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"button is-success",onClick:e[6]||(e[6]=(...s)=>a.loadNext&&a.loadNext(...s))},"Показать ещё")):(0,r.kq)("",!0)])):(0,r.kq)("",!0)])])])}t(7658);var rs=t(7535),ns=t(354),os=t.n(ns),as=t(6797),ls=t.n(as),cs=t(5597),us={data(){return{activeList:"source",search:"",showHints:!1,searchHints:[],sourceList:[],sourceLength:null,friendsList:[],friendsPart:[],partIndex:15,isLoading:!1}},watch:{search(){this.debouncedWatch()}},computed:{loginURL(){return"https://oauth.vk.com/authorize?client_id=51769298&display=page&redirect_uri=http://ivansergee.github.io/vk-test/login&response_type=token&scope=friends,groups&v=5.131"}},mounted(){this.debouncedWatch=os()((()=>{this.getUsers()}),500);const s=localStorage.getItem("source"),e=localStorage.getItem("friends"),t=localStorage.getItem("sourceLen"),i=localStorage.getItem("friendsPart");this.sourceList=s?JSON.parse(s):[],this.friendsList=e?JSON.parse(e):[],this.sourceLength=t,this.friendsPart=i?JSON.parse(i):[]},methods:{async getUsers(){const s=await(0,rs.R)("https://api.vk.com/method/users.search",{access_token:this.$store.state.token,v:"5.154",fields:"photo_50",q:isNaN(this.search)?this.search:`id${this.search}`,count:10});s.error?(0,cs.toast)({message:s.error.error_msg,type:"is-danger",dismissible:!0,duration:1e4,pauseOnHover:!0,position:"top-center"}):this.searchHints=s.response.items},addToSource(s){this.sourceList.push(s),localStorage.setItem("source",JSON.stringify(this.sourceList)),this.showHints=!1},removePerson(s){this.sourceList=this.sourceList.filter((e=>e.id!==s)),localStorage.setItem("source",JSON.stringify(this.sourceList))},async buildFriends(){this.sourceLength=this.sourceList.length,localStorage.setItem("sourceLen",this.sourceLength),this.friendsList=[];for(let s of this.sourceList){const e=await(0,rs.R)("https://api.vk.com/method/friends.get",{access_token:this.$store.state.token,v:"5.154",user_id:s.id,order:"name",fields:["sex","bdate","photo_50"]});if(e.error)return void(0,cs.toast)({message:e.error.error_msg,type:"is-danger",dismissible:!0,duration:1e4,pauseOnHover:!0,position:"top-center"});const t=e.response.items,i=t.map((e=>({...e,source_ids:[s.id]})));i.forEach((s=>{const e=this.friendsList.findIndex((e=>e.id===s.id));e>=0?this.friendsList[e].source_ids.push(...s.source_ids):this.friendsList.push(s)}))}this.getFriendsCount()},async getFriendsCount(){const s=this.buildBatches(),e=[];this.isLoading=!0;for(let t of s){const s=await(0,rs.R)("https://api.vk.com/method/execute",{access_token:this.$store.state.token,v:"5.154",code:`var users = [${t}];\n                 var index = 0;\n                 var counters = [];\n                 while (index < users.length) {\n                   var friendsCount = API.users.get({'user_ids': users[index], 'fields': ['counters']});\n                   counters.push({'id': users[index], 'friends_count': friendsCount[0].counters.friends});\n                   index = index + 1;\n                  };\n                 return counters;`});if(s.error)return void(0,cs.toast)({message:s.error.error_msg,type:"is-danger",dismissible:!0,duration:1e4,pauseOnHover:!0,position:"top-center"});e.push(...s.response)}this.isLoading=!1,this.friendsList.forEach((s=>{const t=e.find((e=>e.id===s.id));t&&(s.friends_count=t.friends_count)})),this.friendsList.sort(((s,e)=>{const t=s.first_name.toUpperCase(),i=e.first_name.toUpperCase();if(t<i)return-1;if(t>i)return 1;const r=s.last_name.toUpperCase(),n=e.last_name.toUpperCase();return r<n?-1:n>n?1:0})),localStorage.setItem("friends",JSON.stringify(this.friendsList)),this.friendsPart=this.friendsList.slice(0,15),localStorage.setItem("friendsPart",JSON.stringify(this.friendsPart)),this.activeList="friends"},buildBatches(){const s=25,e=[];for(let t=0;t<this.friendsList.length;t+=s){const i=this.friendsList.slice(t,t+s),r=i.map((s=>s.id));e.push(r)}return e},getAge(s){const e=s.split(".");if(3===e.length){const e=ls()(s,"D.M.YYYY"),t=ls()().diff(e,"years");return`${t} лет`}return null},getBGColor(s){if(1===s)return"white";const e=Math.round(s/this.sourceLength*100);return 100===e?"hsl(141, 53%, 41%)":e>75?"hsl(141, 70%, 50%);":e>50?"hsl(141, 90%, 70%);":e>25?"hsl(141, 70%, 80%);":void 0},loadNext(){this.friendsPart.push(...this.friendsList.slice(this.partIndex,this.partIndex+15)),this.partIndex+=15}}};const ds=(0,c.Z)(us,[["render",is],["__scopeId","data-v-56c76702"]]);var hs=ds;const ms={class:"container"},gs={class:"columns"},fs={class:"column is-8 is-offset-2"},ps={class:"level is-mobile"},vs=(0,r._)("h1",{class:"title is-4 mb-0"},"VK Test",-1),_s={key:0,class:"box"},js={class:"level is-mobile"},ks={class:"level-left"},bs={class:"image is-96x96 mr-5"},ws=["src"],ys={class:"title is-4"},Ds={class:"box"},Ls=(0,r._)("p",{class:"title is-5"},"Исходные друзья:",-1),zs={class:"level is-mobile"},xs={class:"level-left"},Os={class:"image is-48x48"},Cs=["src"],Ss={class:"ml-2"},Hs={class:"box"},qs=(0,r._)("p",{class:"title is-5"},"Сообщения на стене:",-1),$s={class:"media"},Is={class:"media-content"},Ps={class:"content"},Us={class:"mr-2"},Ns=(0,r._)("br",null,null,-1),Ts=["src"],Ys={key:0},Ws=(0,r._)("span",{class:"icon is-small"},[(0,r._)("i",{class:"bi bi-arrow-90deg-right"})],-1),Fs={class:"level is-mobile"},Ks={class:"level-left"},Rs={key:0,class:"level-item"},As={class:"button is-rounded is-small is-static"},Es=(0,r._)("span",{class:"icon is-small"},[(0,r._)("i",{class:"bi bi-heart-fill"})],-1),Js={key:1,class:"level-item"},Ms={class:"button is-rounded is-small is-static"},Vs=(0,r._)("span",{class:"icon is-small"},[(0,r._)("i",{class:"bi bi-chat"})],-1),Bs={key:2,class:"level-item"},Zs={class:"button is-rounded is-small is-static"},Gs=(0,r._)("span",{class:"icon is-small"},[(0,r._)("i",{class:"bi bi-eye-fill"})],-1);function Qs(s,e,t,i,n,o){const a=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",ms,[(0,r._)("div",gs,[(0,r._)("div",fs,[(0,r._)("div",ps,[(0,r.Wm)(a,{to:{name:"home"}},{default:(0,r.w5)((()=>[vs])),_:1})]),n.userData?((0,r.wg)(),(0,r.iD)("div",_s,[(0,r._)("div",js,[(0,r._)("div",ks,[(0,r._)("figure",bs,[(0,r._)("img",{src:n.userData.photo_100},null,8,ws)]),(0,r._)("p",ys,(0,m.zw)(n.userData.first_name)+" "+(0,m.zw)(n.userData.last_name),1)])])])):(0,r.kq)("",!0),(0,r._)("div",Ds,[Ls,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.sourceData,(s=>((0,r.wg)(),(0,r.iD)("div",zs,[(0,r._)("div",xs,[(0,r._)("figure",Os,[(0,r._)("img",{src:s.photo_50},null,8,Cs)]),(0,r._)("p",Ss,(0,m.zw)(s.first_name)+" "+(0,m.zw)(s.last_name),1)])])))),256))]),(0,r._)("div",Hs,[qs,n.userWall?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(n.userWall,(s=>((0,r.wg)(),(0,r.iD)("article",$s,[(0,r._)("div",Is,[(0,r._)("div",Ps,[(0,r._)("p",null,[(0,r._)("strong",Us,(0,m.zw)(s.from),1),(0,r._)("small",null,(0,m.zw)(o.getPostTime(s.date)),1),Ns,(0,r._)("p",null,(0,m.zw)(s.text),1),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.attachments,(s=>((0,r.wg)(),(0,r.iD)("figure",null,["photo"===s.type?((0,r.wg)(),(0,r.iD)("img",{key:0,src:s.photo.sizes[2].url},null,8,Ts)):(0,r.kq)("",!0)])))),256)),s.copy_history?((0,r.wg)(),(0,r.iD)("p",Ys,[Ws,(0,r.Uk)(" Репост ")])):(0,r.kq)("",!0)])]),(0,r._)("div",Fs,[(0,r._)("div",Ks,[s.likes?((0,r.wg)(),(0,r.iD)("div",Rs,[(0,r._)("button",As,[Es,(0,r._)("span",null,(0,m.zw)(s.likes.count),1)])])):(0,r.kq)("",!0),s.comments?((0,r.wg)(),(0,r.iD)("div",Js,[(0,r._)("button",Ms,[Vs,(0,r._)("span",null,(0,m.zw)(s.comments.count),1)])])):(0,r.kq)("",!0),s.views?((0,r.wg)(),(0,r.iD)("div",Bs,[(0,r._)("button",Zs,[Gs,(0,r._)("span",null,(0,m.zw)(s.views.count),1)])])):(0,r.kq)("",!0)])])])])))),256)):(0,r.kq)("",!0)])])])])}var Xs={data(){return{userData:null,sourceData:null,userWall:null}},mounted(){this.getUser(),this.getSourceFriends(),this.getWall()},methods:{async getUser(){const s=this.$route.params.id,e=await(0,rs.R)("https://api.vk.com/method/users.get",{access_token:this.$store.state.token,v:"5.154",user_ids:s,fields:"photo_100"});e.error?(0,cs.toast)({message:e.error.error_msg,type:"is-danger",dismissible:!0,duration:1e4,pauseOnHover:!0,position:"top-center"}):this.userData=e.response[0]},async getSourceFriends(){const s=this.$route.query.source_ids,e=await(0,rs.R)("https://api.vk.com/method/users.get",{access_token:this.$store.state.token,v:"5.154",user_ids:s,fields:"photo_50"});e.error?(0,cs.toast)({message:e.error.error_msg,type:"is-danger",dismissible:!0,duration:1e4,pauseOnHover:!0,position:"top-center"}):this.sourceData=e.response},async getWall(){const s=this.$route.params.id,e=await(0,rs.R)("https://api.vk.com/method/wall.get",{access_token:this.$store.state.token,v:"5.154",owner_id:s});if(e.error)return void(0,cs.toast)({message:e.error.error_msg,type:"is-danger",dismissible:!0,duration:1e4,pauseOnHover:!0,position:"top-center"});const t=e.response.items,i=new Set;for(let n of t)i.add(n.from_id);const r=await(0,rs.R)("https://api.vk.com/method/users.get",{access_token:this.$store.state.token,v:"5.154",user_ids:Array.from(i).toString()});e.error?(0,cs.toast)({message:e.error.error_msg,type:"is-danger",dismissible:!0,duration:1e4,pauseOnHover:!0,position:"top-center"}):(t.forEach((s=>{const e=r.response.find((e=>e.id===s.from_id));s.from=`${e.first_name} ${e.last_name}`})),this.userWall=t)},getPostTime(s){return ls().unix(s).format("DD.MM.YYYY HH:mm")}}};const se=(0,c.Z)(Xs,[["render",Qs]]);var ee=se;const te=(0,r._)("h1",null,"Обработка авторизации...",-1),ie=[te];function re(s,e,t,i,n,o){return(0,r.wg)(),(0,r.iD)("div",null,ie)}var ne={mounted(){const s=window.location.hash,e=s.match(/access_token=([^&]+)/)[1];localStorage.setItem("access_token",e),this.$store.commit("setToken",token),this.$router.push("/")}};const oe=(0,c.Z)(ne,[["render",re]]);var ae=oe;const le=[{path:"/",name:"home",meta:{title:"VK Test"},component:hs},{path:"/:id",name:"details",meta:{title:"VK Test"},component:ee},{path:"/login",name:"login",component:ae}],ce=(0,h.p7)({history:(0,h.PO)("/"),routes:le});ce.beforeEach(((s,e,t)=>{s.meta.title&&(document.title=`${s.meta.title}`),t()}));var ue=ce,de=t(65),he=(0,de.MT)({state:{isAuthenticated:!1,token:null},getters:{},mutations:{initializeStore(s){localStorage.getItem("access_token")?(s.token=localStorage.getItem("access_token"),s.isAuthenticated=!0):(s.token=null,s.isAuthenticated=!1)},setToken(s,e){s.token=e,s.isAuthenticated=!0}},actions:{},modules:{}});(0,i.ri)(d).use(he).use(ue).mount("#app")}},e={};function t(i){var r=e[i];if(void 0!==r)return r.exports;var n=e[i]={id:i,loaded:!1,exports:{}};return s[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}t.m=s,function(){var s=[];t.O=function(e,i,r,n){if(!i){var o=1/0;for(u=0;u<s.length;u++){i=s[u][0],r=s[u][1],n=s[u][2];for(var a=!0,l=0;l<i.length;l++)(!1&n||o>=n)&&Object.keys(t.O).every((function(s){return t.O[s](i[l])}))?i.splice(l--,1):(a=!1,n<o&&(o=n));if(a){s.splice(u--,1);var c=r();void 0!==c&&(e=c)}}return e}n=n||0;for(var u=s.length;u>0&&s[u-1][2]>n;u--)s[u]=s[u-1];s[u]=[i,r,n]}}(),function(){t.n=function(s){var e=s&&s.__esModule?function(){return s["default"]}:function(){return s};return t.d(e,{a:e}),e}}(),function(){t.d=function(s,e){for(var i in e)t.o(e,i)&&!t.o(s,i)&&Object.defineProperty(s,i,{enumerable:!0,get:e[i]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(s){if("object"===typeof window)return window}}()}(),function(){t.o=function(s,e){return Object.prototype.hasOwnProperty.call(s,e)}}(),function(){t.nmd=function(s){return s.paths=[],s.children||(s.children=[]),s}}(),function(){var s={143:0};t.O.j=function(e){return 0===s[e]};var e=function(e,i){var r,n,o=i[0],a=i[1],l=i[2],c=0;if(o.some((function(e){return 0!==s[e]}))){for(r in a)t.o(a,r)&&(t.m[r]=a[r]);if(l)var u=l(t)}for(e&&e(i);c<o.length;c++)n=o[c],t.o(s,n)&&s[n]&&s[n][0](),s[n]=0;return t.O(u)},i=self["webpackChunkvk_test"]=self["webpackChunkvk_test"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=t.O(void 0,[998],(function(){return t(3160)}));i=t.O(i)})();
//# sourceMappingURL=app.de34b160.js.map