(function(){var s={6700:function(s,e,t){var i={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":941,"./en-il.js":941,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":5655,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":5655,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":1793,"./ru.js":1793,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function r(s){var e=n(s);return t(e)}function n(s){if(!t.o(i,s)){var e=new Error("Cannot find module '"+s+"'");throw e.code="MODULE_NOT_FOUND",e}return i[s]}r.keys=function(){return Object.keys(i)},r.resolve=n,s.exports=r,r.id=6700},583:function(s,e,t){"use strict";var i=t(9963),r=t(6252);const n={id:"wrapper"},o={class:"main-content section"};function a(s,e,t,i,a,l){const c=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("main",o,[(0,r.Wm)(c)])])}var l={beforeCreate(){this.$store.commit("initializeStore")}},c=t(3744);const u=(0,c.Z)(l,[["render",a]]);var d=u,h=t(2201),m=t(3577);const g=s=>((0,r.dD)("data-v-72d4fb69"),s=s(),(0,r.Cn)(),s),f={class:"container"},p={class:"columns"},v={class:"column is-8 is-offset-2"},_={class:"level is-mobile"},j=g((()=>(0,r._)("h1",{class:"title is-4 mb-0"},"VK Test",-1))),k=["href"],b=["href"],w={class:"search"},y={class:"control"},D=g((()=>(0,r._)("i",{class:"bi bi-x-circle-fill"},null,-1))),L=[D],z={key:0,class:"box search-hints"},x={class:"user"},O={class:"level is-mobile mb-1"},C={class:"level-left"},S={class:"image is-32x32 mr-3"},H=["src"],q={class:"level-right"},$=["onClick"],I=g((()=>(0,r._)("hr",{class:"dropdown-divider"},null,-1))),P={class:"tabs mt-3"},U={key:0,class:"source-items"},N={class:"box mt-2"},T={class:"level is-mobile"},Y={class:"level-left"},W={class:"image is-48x48"},A=["src"],F={class:"ml-2"},K={class:"level-right"},R=["onClick"],E={key:1,class:"friends-items"},J={class:"level is-mobile"},M={class:"level-left"},V={class:"level-item"},B={class:"image is-48x48"},Z=["src"],G={class:"level-item"},Q={class:"ml-2"},X={key:0,class:"mr-2"},ss={key:1,class:"mr-2"},es={key:2,class:"mr-2"},ts={key:3,class:"mr-2"};function is(s,e,t,n,o,a){const l=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",f,[(0,r._)("div",p,[(0,r._)("div",v,[(0,r._)("div",_,[(0,r.Wm)(l,{to:{name:"home"}},{default:(0,r.w5)((()=>[j])),_:1}),s.$store.state.isAuthenticated?((0,r.wg)(),(0,r.iD)("a",{key:1,class:"button is-success",href:a.loginURL},"Обновить токен",8,b)):((0,r.wg)(),(0,r.iD)("a",{key:0,class:"button is-success",href:a.loginURL},"Авторизоваться",8,k))]),(0,r._)("div",w,[(0,r._)("div",y,[(0,r.wy)((0,r._)("input",{class:"input",type:"text",placeholder:"Имя, фамилия, username или id","onUpdate:modelValue":e[0]||(e[0]=s=>o.search=s),onFocus:e[1]||(e[1]=s=>o.showHints=!0)},null,544),[[i.nr,o.search]]),o.search?((0,r.wg)(),(0,r.iD)("a",{key:0,class:"clear",onClick:e[2]||(e[2]=s=>o.search="")},L)):(0,r.kq)("",!0)]),o.search&&o.searchHints.length>0&&o.showHints?((0,r.wg)(),(0,r.iD)("div",z,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.searchHints,(s=>((0,r.wg)(),(0,r.iD)("div",x,[(0,r._)("div",O,[(0,r._)("div",C,[(0,r._)("figure",S,[(0,r._)("img",{src:s.photo_50},null,8,H)]),(0,r._)("p",null,(0,m.zw)(s.first_name)+" "+(0,m.zw)(s.last_name),1)]),(0,r._)("div",q,[(0,r._)("a",{class:"button is-success",onClick:e=>a.addToSource(s)},"Добавить",8,$)])]),I])))),256))])):(0,r.kq)("",!0)]),(0,r._)("div",P,[(0,r._)("ul",null,[(0,r._)("li",{class:(0,m.C_)({"is-active":"source"===o.activeList})},[(0,r._)("a",{onClick:e[3]||(e[3]=s=>o.activeList="source")},"Исходный")],2),(0,r._)("li",{class:(0,m.C_)({"is-active":"friends"===o.activeList})},[(0,r._)("a",{onClick:e[4]||(e[4]=s=>o.activeList="friends")},"Друзья")],2)])]),"source"===o.activeList?((0,r.wg)(),(0,r.iD)("div",U,[o.sourceList.length>0?((0,r.wg)(),(0,r.iD)("button",{key:0,class:(0,m.C_)(["button is-success",{"is-loading":o.isLoading}]),onClick:e[5]||(e[5]=(...s)=>a.buildFriends&&a.buildFriends(...s))},"Построить",2)):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.sourceList,(s=>((0,r.wg)(),(0,r.iD)("div",N,[(0,r._)("div",T,[(0,r._)("div",Y,[(0,r._)("figure",W,[(0,r._)("img",{src:s.photo_50},null,8,A)]),(0,r._)("p",F,(0,m.zw)(s.first_name)+" "+(0,m.zw)(s.last_name),1)]),(0,r._)("div",K,[(0,r._)("a",{class:"button is-danger",onClick:e=>a.removePerson(s.id)},"Удалить",8,R)])])])))),256))])):(0,r.kq)("",!0),"friends"===o.activeList&&o.friendsList.length>0?((0,r.wg)(),(0,r.iD)("div",E,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.friendsPart,(s=>((0,r.wg)(),(0,r.iD)("div",{class:"box",style:(0,m.j5)({backgroundColor:a.getBGColor(s.source_ids.length)})},[(0,r._)("div",J,[(0,r._)("div",M,[(0,r._)("div",V,[(0,r._)("figure",B,[(0,r._)("img",{src:s.photo_50},null,8,Z)])]),(0,r._)("div",G,[(0,r._)("div",Q,[(0,r.Wm)(l,{to:{name:"details",params:{id:s.id},query:{source_ids:s.source_ids.toString()}}},{default:(0,r.w5)((()=>[(0,r._)("p",null,(0,m.zw)(s.first_name)+" "+(0,m.zw)(s.last_name),1)])),_:2},1032,["to"]),1===s.sex?((0,r.wg)(),(0,r.iD)("span",X,"Женщина")):(0,r.kq)("",!0),2===s.sex?((0,r.wg)(),(0,r.iD)("span",ss,"Мужчина")):(0,r.kq)("",!0),s.bdate?((0,r.wg)(),(0,r.iD)("span",es,(0,m.zw)(a.getAge(s.bdate)),1)):(0,r.kq)("",!0),s.friends_count?((0,r.wg)(),(0,r.iD)("span",ts,"друзей: "+(0,m.zw)(s.friends_count),1)):(0,r.kq)("",!0)])])])])],4)))),256)),o.friendsList.length>o.friendsPart.length?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"button is-success",onClick:e[6]||(e[6]=(...s)=>a.loadNext&&a.loadNext(...s))},"Показать ещё")):(0,r.kq)("",!0)])):(0,r.kq)("",!0)])])])}t(7658);var rs=t(8605),ns=t(1296),os=t.n(ns),as=t(381),ls=t.n(as),cs=t(7792),us={data(){return{activeList:"source",search:"",showHints:!1,searchHints:[],sourceList:[],sourceLength:null,friendsList:[],friendsPart:[],partIndex:15,isLoading:!1}},watch:{search(){this.debouncedWatch()}},computed:{loginURL(){return"https://oauth.vk.com/authorize?client_id=51769298&display=page&redirect_uri=http://ivansergee.github.io/vk-test/login&response_type=token&scope=friends,groups&v=5.131"}},mounted(){this.debouncedWatch=os()((()=>{this.getUsers()}),500);const s=localStorage.getItem("source"),e=localStorage.getItem("friends"),t=localStorage.getItem("sourceLen"),i=localStorage.getItem("friendsPart");this.sourceList=s?JSON.parse(s):[],this.friendsList=e?JSON.parse(e):[],this.sourceLength=t,this.friendsPart=i?JSON.parse(i):[]},methods:{async getUsers(){if(!this.$store.state.isAuthenticated)return void(0,cs.toast)({message:"Вы не авторизованы!",type:"is-danger",dismissible:!0,duration:1e4,pauseOnHover:!0,position:"top-center"});const s=await(0,rs.R)("https://api.vk.com/method/users.search",{access_token:this.$store.state.token,v:"5.154",fields:"photo_50",q:isNaN(this.search)?this.search:`id${this.search}`,count:10});s.error?(0,cs.toast)({message:s.error.error_msg,type:"is-danger",dismissible:!0,duration:1e4,pauseOnHover:!0,position:"top-center"}):this.searchHints=s.response.items},addToSource(s){this.sourceList.push(s),localStorage.setItem("source",JSON.stringify(this.sourceList)),this.showHints=!1},removePerson(s){this.sourceList=this.sourceList.filter((e=>e.id!==s)),localStorage.setItem("source",JSON.stringify(this.sourceList))},async buildFriends(){this.sourceLength=this.sourceList.length,localStorage.setItem("sourceLen",this.sourceLength),this.friendsList=[];for(let s of this.sourceList){const e=await(0,rs.R)("https://api.vk.com/method/friends.get",{access_token:this.$store.state.token,v:"5.154",user_id:s.id,order:"name",fields:["sex","bdate","photo_50"]});if(e.error)return void(0,cs.toast)({message:e.error.error_msg,type:"is-danger",dismissible:!0,duration:1e4,pauseOnHover:!0,position:"top-center"});const t=e.response.items,i=t.map((e=>({...e,source_ids:[s.id]})));i.forEach((s=>{const e=this.friendsList.findIndex((e=>e.id===s.id));e>=0?this.friendsList[e].source_ids.push(...s.source_ids):this.friendsList.push(s)}))}this.getFriendsCount()},async getFriendsCount(){const s=this.buildBatches(),e=[];this.isLoading=!0;for(let t of s){const s=await(0,rs.R)("https://api.vk.com/method/execute",{access_token:this.$store.state.token,v:"5.154",code:`var users = [${t}];\n                 var index = 0;\n                 var counters = [];\n                 while (index < users.length) {\n                   var friendsCount = API.users.get({'user_ids': users[index], 'fields': ['counters']});\n                   counters.push({'id': users[index], 'friends_count': friendsCount[0].counters.friends});\n                   index = index + 1;\n                  };\n                 return counters;`});if(s.error)return void(0,cs.toast)({message:s.error.error_msg,type:"is-danger",dismissible:!0,duration:1e4,pauseOnHover:!0,position:"top-center"});e.push(...s.response)}this.isLoading=!1,this.friendsList.forEach((s=>{const t=e.find((e=>e.id===s.id));t&&(s.friends_count=t.friends_count)})),this.friendsList.sort(((s,e)=>{const t=s.first_name.toUpperCase(),i=e.first_name.toUpperCase();if(t<i)return-1;if(t>i)return 1;const r=s.last_name.toUpperCase(),n=e.last_name.toUpperCase();return r<n?-1:n>n?1:0})),localStorage.setItem("friends",JSON.stringify(this.friendsList)),this.friendsPart=this.friendsList.slice(0,15),localStorage.setItem("friendsPart",JSON.stringify(this.friendsPart)),this.activeList="friends"},buildBatches(){const s=25,e=[];for(let t=0;t<this.friendsList.length;t+=s){const i=this.friendsList.slice(t,t+s),r=i.map((s=>s.id));e.push(r)}return e},getAge(s){const e=s.split(".");if(3===e.length){const e=ls()(s,"D.M.YYYY"),t=ls()().diff(e,"years");return`${t} лет`}return null},getBGColor(s){if(1===s)return"white";const e=Math.round(s/this.sourceLength*100);return 100===e?"hsl(141, 53%, 41%)":e>75?"hsl(141, 70%, 50%);":e>50?"hsl(141, 90%, 70%);":e>25?"hsl(141, 70%, 80%);":void 0},loadNext(){this.friendsPart.push(...this.friendsList.slice(this.partIndex,this.partIndex+15)),this.partIndex+=15}}};const ds=(0,c.Z)(us,[["render",is],["__scopeId","data-v-72d4fb69"]]);var hs=ds;const ms={class:"container"},gs={class:"columns"},fs={class:"column is-8 is-offset-2"},ps={class:"level is-mobile"},vs=(0,r._)("h1",{class:"title is-4 mb-0"},"VK Test",-1),_s={key:0,class:"box"},js={class:"level is-mobile"},ks={class:"level-left"},bs={class:"image is-96x96 mr-5"},ws=["src"],ys={class:"title is-4"},Ds={class:"box"},Ls=(0,r._)("p",{class:"title is-5"},"Исходные друзья:",-1),zs={class:"level is-mobile"},xs={class:"level-left"},Os={class:"image is-48x48"},Cs=["src"],Ss={class:"ml-2"},Hs={class:"box"},qs=(0,r._)("p",{class:"title is-5"},"Сообщения на стене:",-1),$s={class:"media"},Is={class:"media-content"},Ps={class:"content"},Us={class:"mr-2"},Ns=(0,r._)("br",null,null,-1),Ts=["src"],Ys={key:0},Ws=(0,r._)("span",{class:"icon is-small"},[(0,r._)("i",{class:"bi bi-arrow-90deg-right"})],-1),As={class:"level is-mobile"},Fs={class:"level-left"},Ks={key:0,class:"level-item"},Rs={class:"button is-rounded is-small is-static"},Es=(0,r._)("span",{class:"icon is-small"},[(0,r._)("i",{class:"bi bi-heart-fill"})],-1),Js={key:1,class:"level-item"},Ms={class:"button is-rounded is-small is-static"},Vs=(0,r._)("span",{class:"icon is-small"},[(0,r._)("i",{class:"bi bi-chat"})],-1),Bs={key:2,class:"level-item"},Zs={class:"button is-rounded is-small is-static"},Gs=(0,r._)("span",{class:"icon is-small"},[(0,r._)("i",{class:"bi bi-eye-fill"})],-1);function Qs(s,e,t,i,n,o){const a=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",ms,[(0,r._)("div",gs,[(0,r._)("div",fs,[(0,r._)("div",ps,[(0,r.Wm)(a,{to:{name:"home"}},{default:(0,r.w5)((()=>[vs])),_:1})]),n.userData?((0,r.wg)(),(0,r.iD)("div",_s,[(0,r._)("div",js,[(0,r._)("div",ks,[(0,r._)("figure",bs,[(0,r._)("img",{src:n.userData.photo_100},null,8,ws)]),(0,r._)("p",ys,(0,m.zw)(n.userData.first_name)+" "+(0,m.zw)(n.userData.last_name),1)])])])):(0,r.kq)("",!0),(0,r._)("div",Ds,[Ls,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.sourceData,(s=>((0,r.wg)(),(0,r.iD)("div",zs,[(0,r._)("div",xs,[(0,r._)("figure",Os,[(0,r._)("img",{src:s.photo_50},null,8,Cs)]),(0,r._)("p",Ss,(0,m.zw)(s.first_name)+" "+(0,m.zw)(s.last_name),1)])])))),256))]),(0,r._)("div",Hs,[qs,n.userWall?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(n.userWall,(s=>((0,r.wg)(),(0,r.iD)("article",$s,[(0,r._)("div",Is,[(0,r._)("div",Ps,[(0,r._)("p",null,[(0,r._)("strong",Us,(0,m.zw)(s.from),1),(0,r._)("small",null,(0,m.zw)(o.getPostTime(s.date)),1),Ns,(0,r._)("p",null,(0,m.zw)(s.text),1),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.attachments,(s=>((0,r.wg)(),(0,r.iD)("figure",null,["photo"===s.type?((0,r.wg)(),(0,r.iD)("img",{key:0,src:s.photo.sizes[2].url},null,8,Ts)):(0,r.kq)("",!0)])))),256)),s.copy_history?((0,r.wg)(),(0,r.iD)("p",Ys,[Ws,(0,r.Uk)(" Репост ")])):(0,r.kq)("",!0)])]),(0,r._)("div",As,[(0,r._)("div",Fs,[s.likes?((0,r.wg)(),(0,r.iD)("div",Ks,[(0,r._)("button",Rs,[Es,(0,r._)("span",null,(0,m.zw)(s.likes.count),1)])])):(0,r.kq)("",!0),s.comments?((0,r.wg)(),(0,r.iD)("div",Js,[(0,r._)("button",Ms,[Vs,(0,r._)("span",null,(0,m.zw)(s.comments.count),1)])])):(0,r.kq)("",!0),s.views?((0,r.wg)(),(0,r.iD)("div",Bs,[(0,r._)("button",Zs,[Gs,(0,r._)("span",null,(0,m.zw)(s.views.count),1)])])):(0,r.kq)("",!0)])])])])))),256)):(0,r.kq)("",!0)])])])])}var Xs={data(){return{userData:null,sourceData:null,userWall:null}},mounted(){this.getUser(),this.getSourceFriends(),this.getWall()},methods:{async getUser(){const s=this.$route.params.id,e=await(0,rs.R)("https://api.vk.com/method/users.get",{access_token:this.$store.state.token,v:"5.154",user_ids:s,fields:"photo_100"});e.error?(0,cs.toast)({message:e.error.error_msg,type:"is-danger",dismissible:!0,duration:1e4,pauseOnHover:!0,position:"top-center"}):this.userData=e.response[0]},async getSourceFriends(){const s=this.$route.query.source_ids,e=await(0,rs.R)("https://api.vk.com/method/users.get",{access_token:this.$store.state.token,v:"5.154",user_ids:s,fields:"photo_50"});e.error?(0,cs.toast)({message:e.error.error_msg,type:"is-danger",dismissible:!0,duration:1e4,pauseOnHover:!0,position:"top-center"}):this.sourceData=e.response},async getWall(){const s=this.$route.params.id,e=await(0,rs.R)("https://api.vk.com/method/wall.get",{access_token:this.$store.state.token,v:"5.154",owner_id:s});if(e.error)return void(0,cs.toast)({message:e.error.error_msg,type:"is-danger",dismissible:!0,duration:1e4,pauseOnHover:!0,position:"top-center"});const t=e.response.items,i=new Set;for(let n of t)i.add(n.from_id);const r=await(0,rs.R)("https://api.vk.com/method/users.get",{access_token:this.$store.state.token,v:"5.154",user_ids:Array.from(i).toString()});e.error?(0,cs.toast)({message:e.error.error_msg,type:"is-danger",dismissible:!0,duration:1e4,pauseOnHover:!0,position:"top-center"}):(t.forEach((s=>{const e=r.response.find((e=>e.id===s.from_id));s.from=`${e.first_name} ${e.last_name}`})),this.userWall=t)},getPostTime(s){return ls().unix(s).format("DD.MM.YYYY HH:mm")}}};const se=(0,c.Z)(Xs,[["render",Qs]]);var ee=se;const te=(0,r._)("h1",null,"Обработка авторизации...",-1),ie=[te];function re(s,e,t,i,n,o){return(0,r.wg)(),(0,r.iD)("div",null,ie)}var ne={mounted(){const s=window.location.hash,e=s.match(/access_token=([^&]+)/)[1];localStorage.setItem("access_token",e),this.$store.commit("setToken",token),this.$router.push("/")}};const oe=(0,c.Z)(ne,[["render",re]]);var ae=oe;const le=[{path:"/",name:"home",meta:{title:"VK Test"},component:hs},{path:"/:id",name:"details",meta:{title:"VK Test"},component:ee},{path:"/login",name:"login",component:ae}],ce=(0,h.p7)({history:(0,h.PO)("https://ivansergee.github.io/vk-test/"),routes:le});ce.beforeEach(((s,e,t)=>{s.meta.title&&(document.title=`${s.meta.title}`),t()}));var ue=ce,de=t(3907),he=(0,de.MT)({state:{isAuthenticated:!1,token:null},getters:{},mutations:{initializeStore(s){localStorage.getItem("access_token")?(s.token=localStorage.getItem("access_token"),s.isAuthenticated=!0):(s.token=null,s.isAuthenticated=!1)},setToken(s,e){s.token=e,s.isAuthenticated=!0}},actions:{},modules:{}});(0,i.ri)(d).use(he).use(ue).mount("#app")}},e={};function t(i){var r=e[i];if(void 0!==r)return r.exports;var n=e[i]={id:i,loaded:!1,exports:{}};return s[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}t.m=s,function(){var s=[];t.O=function(e,i,r,n){if(!i){var o=1/0;for(u=0;u<s.length;u++){i=s[u][0],r=s[u][1],n=s[u][2];for(var a=!0,l=0;l<i.length;l++)(!1&n||o>=n)&&Object.keys(t.O).every((function(s){return t.O[s](i[l])}))?i.splice(l--,1):(a=!1,n<o&&(o=n));if(a){s.splice(u--,1);var c=r();void 0!==c&&(e=c)}}return e}n=n||0;for(var u=s.length;u>0&&s[u-1][2]>n;u--)s[u]=s[u-1];s[u]=[i,r,n]}}(),function(){t.n=function(s){var e=s&&s.__esModule?function(){return s["default"]}:function(){return s};return t.d(e,{a:e}),e}}(),function(){t.d=function(s,e){for(var i in e)t.o(e,i)&&!t.o(s,i)&&Object.defineProperty(s,i,{enumerable:!0,get:e[i]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(s){if("object"===typeof window)return window}}()}(),function(){t.o=function(s,e){return Object.prototype.hasOwnProperty.call(s,e)}}(),function(){t.nmd=function(s){return s.paths=[],s.children||(s.children=[]),s}}(),function(){var s={143:0};t.O.j=function(e){return 0===s[e]};var e=function(e,i){var r,n,o=i[0],a=i[1],l=i[2],c=0;if(o.some((function(e){return 0!==s[e]}))){for(r in a)t.o(a,r)&&(t.m[r]=a[r]);if(l)var u=l(t)}for(e&&e(i);c<o.length;c++)n=o[c],t.o(s,n)&&s[n]&&s[n][0](),s[n]=0;return t.O(u)},i=self["webpackChunkvk_test"]=self["webpackChunkvk_test"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=t.O(void 0,[998],(function(){return t(583)}));i=t.O(i)})();
//# sourceMappingURL=app.e350a7c9.js.map